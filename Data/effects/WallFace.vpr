#version 400

layout (location = 0) in vec3 a_position;

uniform sampler2D u_depthTex;
uniform mat4 u_mvp;

void main()
{
	vec2 coords = a_position.xy + vec2(0.5, 0.5);

	float depth = texture2D(u_depthTex, coords).x;

	depth = clamp(depth, 0, 1);

	gl_Position = u_mvp * vec4(a_position.x, a_position.y, depth, 1.0);
}
